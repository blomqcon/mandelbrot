<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<title>Mandelbrot</title>
	
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script src="scripts/webgl-utils.js"></script>
	<script src="scripts/mandelbrot.js"></script>
	
	<script id="shader-fs" type="x-shader/x-fragment">	
  		precision mediump float;

  		varying vec2 vZoom;

  		void main(void) {
    		float c_a = vZoom.x;
    		float c_b = vZoom.y;

			float z_a = 0.0;
			float z_b = 0.0;
			float z_a_temp = 0.0;
			float z_b_temp = 0.0;

			int diverge = 0;
			for(int i = 0; i < 100; i++) {
				z_a_temp = z_a;
				z_b_temp = z_b;
				z_a = (z_a_temp * z_a_temp) - (z_b_temp * z_b_temp) + c_a;
				z_b = 2.0 * (z_a_temp * z_b_temp) + c_b;

				if(((z_a * z_a) + (z_b * z_b)) > 100.0) {
					diverge = i;
					break;
				}
			}
			
			if(diverge > 75) {
				gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);
			} else if(diverge > 50) {
				gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
			} else if(diverge > 25) {
				gl_FragColor = vec4(0.0, 1.0, 0.0, 1.0);
			} else if(diverge > 2) {
				gl_FragColor = vec4(0.0, 0.0, 1.0, 1.0);
			} else {
				gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
			}
  		}
	</script>
	
	<script id="shader-vs" type="x-shader/x-vertex">
  		attribute vec2 aVertexPosition;
  		attribute vec2 aZoom;

  		varying vec2 vZoom;

  		void main(void) {
			// Set the size of the point
			gl_PointSize = 1.0;

    		gl_Position = vec4(aVertexPosition, 1.0, 1.0);
			vZoom = aZoom;
  		}
	</script>
</head>

<body>
	<h1>Mandelbrot Set</h1>
	<canvas id="canvas" width="850" height="660"></canvas>
</body>

</html>